service: serverless-event-driven-tickets # NOTE: update this with your service name

# frameworkVersion: "=X.X.X"

provider:
  name: aws
  runtime: nodejs10.x

functions:
  # Web functions
  Web:
    handler: handler-web.handler
    events:
      - http:
          path: /
          method: ANY
    environment:
      API_GATEWAY_RESOURCE_PATH: "/" # this needs to be set if web is not under root path, e.g. "/dev" if API Gateway uses stage dev
      API_URL: "http://localhost:3000/api" # should be updated with API Gateway URL, e.g. "https://dsdsadasd.execute-api.us-east-1.amazonaws.com/dev/api"

  # API functions
  GetTickets:
    handler: handler-api.getTickets
    events:
      - http:
          path: api/tickets
          method: get

  GetTicket:
    handler: handler-api.getTicket
    events:
      - http:
          path: api/tickets/{id}
          method: get
          request:
            parameters:
              paths:
                id: true
  CreateTicket:
    handler: handler-api.createTicket
    events:
      - http:
          path: api/tickets
          method: post

  UpdateTicket:
    handler: handler-api.updateTicket
    events:
      - http:
          path: api/tickets/{id}
          method: put
          request:
            parameters:
              paths:
                id: true

plugins:
  - serverless-offline